<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Shaozj's blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Shaozj's blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Shaozj's blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shaozj's blog">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Shaozj's blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Shaozj's blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/20/老生常谈之-css-居中/" itemprop="url">
                  老生常谈之 css 居中
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-20T17:37:02+08:00" content="2016-08-20">
              2016-08-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/css/" itemprop="url" rel="index">
                    <span itemprop="name">css</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/css/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/20/老生常谈之-css-居中/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/20/老生常谈之-css-居中/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="绝对定位居中(Absolute_Centering)技术">绝对定位居中(Absolute Centering)技术</h3><pre><code><span class="class">.Absolute-Center</span> <span class="rules">{  
  <span class="rule"><span class="attribute">margin</span>:<span class="value"> auto</span></span>;  
  <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;  
  <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">0</span></span></span>; <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">0</span></span></span>; <span class="rule"><span class="attribute">bottom</span>:<span class="value"> <span class="number">0</span></span></span>; <span class="rule"><span class="attribute">right</span>:<span class="value"> <span class="number">0</span></span></span>;  
}</span>  
</code></pre><ul>
<li>解释：</li>
</ul>
<p>通过以上描述，绝对居中（AbsoluteCentering）的工作机理可以阐述如下：</p>
<p>1、在普通内容流（normal content flow）中，margin:auto的效果等同于margin-top:0;margin-bottom:0。<br>W3C中写道If ‘margin-top’, or’margin-bottom’ are ‘auto’, their used value is 0.</p>
<p>2、position:absolute使绝对定位块跳出了内容流，内容流中的其余部分渲染时绝对定位部分不进行渲染。</p>
<p>Developer.mozilla.org:…an element that is positioned absolutely is taken out of the flow and thustakes up no space</p>
<p>3、为块区域设置top: 0; left: 0; bottom: 0; right: 0;将给浏览器重新分配一个边界框，此时该块block将填充其父元素的所有可用空间，父元素一般为body或者声明为position:relative;的容器。</p>
<p>Developer.mozilla.org:For absolutely positioned elements, the top, right, bottom, and left propertiesspecify offsets from the edge of the element’s containing block (what theelement is positioned relative to).</p>
<p>4、  给内容块设置一个高度height或宽度width，能够防止内容块占据所有的可用空间，促使浏览器根据新的边界框重新计算margin:auto</p>
<p>Developer.mozilla.org: The margin of the[absolutely positioned] element is then positioned inside these offsets.</p>
<p>5、由于内容块被绝对定位，脱离了正常的内容流，浏览器会给margin-top,margin-bottom相同的值，使元素块在先前定义的边界内居中。<br>W3.org: If none of the three [top, bottom,height] are ‘auto’: If both ‘margin-top’ and ‘margin-bottom’ are ‘auto’, solvethe equation under the extra constraint that the two margins get equal values.AKA: center the block vertically</p>
<p>这么看来， margin:auto似乎生来就是为绝对居中(Absolute Centering)设计的，所以绝对居中(Absolute Centering)应该都兼容符合标准的现代浏览器。</p>
<p>简而言之（TL;DR）：绝对定位元素不在普通内容流中渲染，因此margin:auto可以使内容在通过top: 0; left: 0; bottom: 0;right: 0;设置的边界内垂直居中。</p>
<h3 id="负外边距(Negative_Margins)居中">负外边距(Negative Margins)居中</h3><pre><code><span class="class">.is-Negative</span> <span class="rules">{  
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">300px</span></span></span>;  
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">200px</span></span></span>;  
    <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">20px</span></span></span>;  
    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;  
    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">50%</span></span></span>; <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;  
    <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">170px</span></span></span>; <span class="comment">/* (width + padding)/2 */</span>  
    <span class="rule"><span class="attribute">margin-top</span>:<span class="value"> -<span class="number">120px</span></span></span>; <span class="comment">/* (height + padding)/2 */</span>  
}</span>
</code></pre><h3 id="Transform_居中">Transform 居中</h3><pre><code><span class="class">.is-Transformed</span> <span class="rules">{   
  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">50%</span></span></span>;  
  <span class="rule"><span class="attribute">margin</span>:<span class="value"> auto</span></span>;  
  <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;  
  <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">50%</span></span></span>; <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;  
  <span class="rule"><span class="attribute">-webkit-transform</span>:<span class="value"> <span class="function">translate</span>(-<span class="number">50%</span>,-<span class="number">50%</span>)</span></span>;  
      <span class="rule"><span class="attribute">-ms-transform</span>:<span class="value"> <span class="function">translate</span>(-<span class="number">50%</span>,-<span class="number">50%</span>)</span></span>;  
          <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translate</span>(-<span class="number">50%</span>,-<span class="number">50%</span>)</span></span>;  
}</span>  
</code></pre><h3 id="表格单元格（Table-Cell）居中">表格单元格（Table-Cell）居中</h3><pre><code>// html：
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"Center-Container is-Table"</span>&gt;</span>  
  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"Table-Cell"</span>&gt;</span>  
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"Center-Block"</span>&gt;</span>  
    <span class="comment">&lt;!-- CONTENT --&gt;</span>  
    <span class="tag">&lt;/<span class="title">div</span>&gt;</span>  
  <span class="tag">&lt;/<span class="title">div</span>&gt;</span>  
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>  

// css
.Center-Container.is-Table { display: table; }  
.is-Table .Table-Cell {  
  display: table-cell;  
  vertical-align: middle;  
}  
.is-Table .Center-Block {  
  width: 50%;  
  margin: 0 auto;  
}  
</code></pre><h3 id="行内块元素（Inline-Block）居中">行内块元素（Inline-Block）居中</h3><pre><code><span class="comment">// HTML:</span>
&lt;<span class="keyword">div</span> id=<span class="string">"box"</span>&gt;
    &lt;<span class="keyword">div</span> id=<span class="string">"content"</span>&gt;我是内容&lt;br /&gt;我也是内容&lt;/<span class="keyword">div</span>&gt;
    &lt;<span class="keyword">div</span> id=<span class="string">"actor"</span>&gt;我是演员&lt;/<span class="keyword">div</span>&gt;
&lt;/<span class="keyword">div</span>&gt;

<span class="comment">// CSS:</span>
<span class="preprocessor">#box { height: 400px; background: #c00;}</span>
<span class="preprocessor">#content, #actor { display: inline-block; vertical-align: middle;}</span>
<span class="preprocessor">#content { font-size: 12px; color: #fff;}</span>
<span class="preprocessor">#actor {height: 400px; font-size: 0;}</span>
</code></pre><p>加粗体的部分是关键所在。原理是都显示为行框的高度由最高的行内框决定。div#actor作为演员，高度指定和父元素一致。<br>兼容性：支持inline-block的浏览器均可。对于IE6/7，可以先使用hack方式使其支持Inline-block后，使用此方法实现垂直居中。</p>
<h3 id="Flexbox居中">Flexbox居中</h3><pre><code><span class="class">.box</span> <span class="rules">{
  <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;
  <span class="rule"><span class="attribute">justify-content</span>:<span class="value"> center</span></span>;
  <span class="rule"><span class="attribute">align-items</span>:<span class="value"> center</span></span>;
}</span>
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/20/vim前端配置/" itemprop="url">
                  vim前端配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-20T15:37:52+08:00" content="2016-08-20">
              2016-08-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/vim/" itemprop="url" rel="index">
                    <span itemprop="name">vim</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/20/vim前端配置/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/20/vim前端配置/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="VIM_插件管理器">VIM 插件管理器</h3><p><a href="https://github.com/VundleVim/Vundle.vim" target="_blank" rel="external">Vundle</a>  </p>
<ul>
<li><p>下载<br>  <code>$ git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</code></p>
</li>
<li><p>配置插件<br>  在<code>~/.vimrc</code>文件中添加  </p>
<pre><code><span class="operator"><span class="keyword">set</span> nocompatible              <span class="string">" be iMproved, required
filetype off                  "</span> <span class="keyword">required</span>

<span class="string">" set the runtime path to include Vundle and initialize
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
"</span> alternatively, pass a <span class="keyword">path</span> <span class="keyword">where</span> Vundle should <span class="keyword">install</span> plugins
<span class="string">"call vundle#begin('~/some/path/here')

"</span> let Vundle manage Vundle, <span class="keyword">required</span>
<span class="keyword">Plugin</span> <span class="string">'VundleVim/Vundle.vim'</span>

<span class="string">" The following are examples of different formats supported.
"</span> <span class="keyword">Keep</span> <span class="keyword">Plugin</span> commands <span class="keyword">between</span> vundle#<span class="keyword">begin</span>/<span class="keyword">end</span>.
<span class="string">" plugin on GitHub repo
Plugin 'tpope/vim-fugitive'
"</span> <span class="keyword">plugin</span> <span class="keyword">from</span> <span class="keyword">http</span>://vim-scripts.org/vim/scripts.html
<span class="keyword">Plugin</span> <span class="string">'L9'</span>
<span class="string">" Git plugin not hosted on GitHub
Plugin 'git://git.wincent.com/command-t.git'
"</span> git repos <span class="keyword">on</span> your <span class="keyword">local</span> machine (<span class="keyword">i</span>.<span class="keyword">e</span>. <span class="keyword">when</span> working <span class="keyword">on</span> your own <span class="keyword">plugin</span>)
<span class="keyword">Plugin</span> <span class="string">'file:///home/gmarik/path/to/plugin'</span>
<span class="string">" The sparkup vim script is in a subdirectory of this repo called vim.
"</span> Pass the <span class="keyword">path</span> <span class="keyword">to</span> <span class="keyword">set</span> the runtimepath properly.
<span class="keyword">Plugin</span> <span class="string">'rstacruz/sparkup'</span>, {<span class="string">'rtp'</span>: <span class="string">'vim/'</span>}
<span class="string">" Install L9 and avoid a Naming conflict if you've already installed a
"</span> different <span class="keyword">version</span> somewhere <span class="keyword">else</span>.
<span class="keyword">Plugin</span> <span class="string">'ascenator/L9'</span>, {<span class="string">'name'</span>: <span class="string">'newL9'</span>}

<span class="string">" All of your Plugins must be added before the following line
call vundle#end()            "</span> <span class="keyword">required</span>
filetype <span class="keyword">plugin</span> indent <span class="keyword">on</span>    <span class="string">" required
"</span> <span class="keyword">To</span> <span class="keyword">ignore</span> <span class="keyword">plugin</span> indent changes, instead <span class="keyword">use</span>:
<span class="string">"filetype plugin on
"</span>
<span class="string">" Brief help
"</span> :PluginList       - lists configured plugins
<span class="string">" :PluginInstall    - installs plugins; append `!` to update or just :PluginUpdate
"</span> :PluginSearch foo - searches <span class="keyword">for</span> foo;</span> append `!` to refresh local <span class="operator"><span class="keyword">cache</span>
<span class="string">" :PluginClean      - confirms removal of unused plugins; append `!` to auto-approve removal
"</span>
<span class="string">" see :h vundle for more details or wiki for FAQ
"</span> Put your non-<span class="keyword">Plugin</span> <span class="keyword">stuff</span> <span class="keyword">after</span> this line  </span>
</code></pre></li>
<li><p>安装插件<br>   打开<code>vim</code>，运行<code>:PluginInstall</code></p>
</li>
</ul>
<h3 id="vim-jsbeautify">vim-jsbeautify</h3><p><a href="https://github.com/maksimr/vim-jsbeautify" target="_blank" rel="external">vim-jsbeautify</a></p>
<ul>
<li>在<code>~/.vimrc</code>中添加<br>  <code>Plugin &#39;maksimr/vim-jsbeautify&#39;</code></li>
<li>打开<code>vim</code>，运行<code>:PluginInstall</code></li>
</ul>
<h3 id="vim-javascript">vim-javascript</h3><p><a href="https://github.com/pangloss/vim-javascript" target="_blank" rel="external">vim-javascript</a></p>
<ul>
<li><ul>
<li>在<code>~/.vimrc</code>中添加<br><code>Plugin &#39;pangloss/vim-javascript&#39;</code></li>
</ul>
</li>
<li>打开<code>vim</code>，运行<code>:PluginInstall</code></li>
</ul>
<h3 id="语法高亮配置">语法高亮配置</h3><p>如果语法高亮没有生效，在<code>.vimrc</code> 加入以下3句：</p>
<pre><code><span class="keyword">syntax</span> enable <span class="string">" enable syntax hightlight and completion
</span><span class="keyword">syntax</span> <span class="keyword">on</span> <span class="string">" syntax highlighing
</span><span class="keyword">filetype</span> <span class="keyword">on</span> " <span class="keyword">try</span> <span class="keyword">to</span> detect <span class="keyword">file</span> types
</code></pre><h3 id="emmet-vim">emmet-vim</h3><p><a href="https://github.com/mattn/emmet-vim" target="_blank" rel="external">emmet-vim</a><br>还是一样的套路<br><code>Plugin &#39;mattn/emmet-vim&#39;</code><br>教程网站<a href="http://mattn.github.io/emmet-vim/" target="_blank" rel="external">http://mattn.github.io/emmet-vim/</a><br>中文教程<a href="https://www.zfanw.com/blog/zencoding-vim-tutorial-chinese.html" target="_blank" rel="external">https://www.zfanw.com/blog/zencoding-vim-tutorial-chinese.html</a></p>
<h3 id="我的_-vimrc_配置文件">我的 .vimrc 配置文件</h3><p><a href="https://github.com/shaozj/vimrc" target="_blank" rel="external">https://github.com/shaozj/vimrc</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/14/xss-安全防范/" itemprop="url">
                  XSS 安全防范
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-14T14:18:15+08:00" content="2016-08-14">
              2016-08-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/安全/" itemprop="url" rel="index">
                    <span itemprop="name">安全</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/14/xss-安全防范/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/14/xss-安全防范/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>XSS是跨站脚本攻击，主要特点是开发者之外的人向页面内容注入了脚本执行。<br>XSS攻击有两个要素，一是来自用户或者三方的内容，二是被当做html或者javascript代码执行。<br>在面对XSS攻击时，需要牢记的一句话是：<strong>一切输入和输出都是敌对的！</strong></p>
<h3 id="XSS_攻击的输入点">XSS 攻击的输入点</h3><p>开发者之外的人可以通过以下输入点向页面中注入攻击脚本：</p>
<ul>
<li><code>window.location/document.location/document.referrer</code><ul>
<li>来自url的内容，因为链接可能来自外部页面，所以页面url应当视为外部用户内容。</li>
</ul>
</li>
<li>后端接口返回数据<ul>
<li>来自服务端的数据，这些数据可能由其它系统提供，其中可能包含用户的直接输入，所以应该把通过后端接口请求得到的数据视为外部用户产生内容。</li>
</ul>
</li>
<li><code>document.cookie</code><ul>
<li><code>cookie</code>有较多渠道被写入，为安全起见，应当视为用户产生内容。</li>
</ul>
</li>
<li><code>input.value/textarea.value</code><ul>
<li>用户产生内容。</li>
</ul>
</li>
</ul>
<h3 id="XSS_攻击的输出点">XSS 攻击的输出点</h3><p>XSS 攻击输出点是开发者在代码中写的语句，这些语句可能会将用户输入的内容作为代码执行，进而发生XSS 攻击。XSS 攻击主要有以下输出点：</p>
<ul>
<li><p>document.write/document.writeln：直接向文档流写入html内容，不提倡使用.</p>
<ul>
<li>如果希望用这种方式输出文本，在写入之前，应当使用document.createTextNode+appendChild将之转换成html文本语法。</li>
<li>如果确有特殊设计，希望用这种方式输出html，在写入之前，应当过滤html语法字符。</li>
</ul>
</li>
<li><p>innerHTML/$el.html()：直接向文档节点内插入html内容，除使用模板外，不提倡使用。</p>
<ul>
<li>如果希望用这种方式输出文本，应当使用innerText或者document.createTextNode+appendChild代替。</li>
<li>如果确有特殊设计，希望用这种方式输出html，在写入之前，应当过滤html语法字符。</li>
</ul>
</li>
<li><p>new Function：通过参数字符串创建新函数，除特殊场景外，不提倡使用。如果来自不安全的输入的字符需要拼接成字符串，建议使用JSON.stringify处理。</p>
</li>
<li><p>eval：把字符串当做函数执行，除特殊场景外，不提倡使用。如果来自不安全的输入的字符需要拼接成字符串，建议使用JSON.stringify处理。</p>
</li>
<li><p>setTimeout/setInterval：时间相关函数，如果第一个参数是字符串，那么效果类似eval，任何场景下，不提倡这样使用，第一个参数应该永远是函数类型。</p>
</li>
<li><p>image.src/link.href/a.href：设置url，因为可能是javascript协议，建议使用lib.httpurl解析url的结构和参数，确定域名属于安全域名。</p>
</li>
<li><p>window.location：跳转url，因为uri可能是javascript协议，建议使用lib.httpurl解析url的结构和参数，确定域名属于安全域名。</p>
</li>
</ul>
<h3 id="XSS_攻击实例">XSS 攻击实例</h3><h4 id="HTML_攻击">HTML 攻击</h4><ul>
<li><p>输出点</p>
<ul>
<li><code>&lt;img src=&quot;[代码]&quot;&gt;</code></li>
<li><p>现在弹个窗:</p>
<p> <code>&lt;img src=&quot;x&quot; onerror=&quot;&amp;#97;&amp;#108;&amp;#101;&amp;#114;&amp;#116;&amp;#40;&amp;#49;&amp;#41;&quot;&gt;</code></p>
</li>
<li><p>原code:</p>
<p>  <code>&lt;img src=&quot;x&quot; onerror=&quot;alert(1)&quot;&gt;</code></p>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/07/ES6-模板字符串/" itemprop="url">
                  ES6 模板字符串
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-07T11:49:14+08:00" content="2016-08-07">
              2016-08-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/07/ES6-模板字符串/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/07/ES6-模板字符串/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>无论是前端还是后端，都存在着模板引擎。模板引擎有着丰富的表现力，使得我们可以根据不同的数据渲染出不同的页面结构以及内容。在es6中引入了模板字符串，使得我们可以在字符串中嵌入变量、表达式以及可以直接写多行字符串。另外，模板字符串还支持嵌套使用。这些特性，一些模板引擎基本的功能，我们可以用es6模板字符串来实现。</p>
<h3 id="for_循环">for 循环</h3><ul>
<li>一种比较直接的方式是：</li>
</ul>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$&#123;</span><br><span class="line">(()=&gt;&#123;</span><br><span class="line">  <span class="keyword">let</span> html = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = blocksData.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> curData = blocksData[i];</span><br><span class="line">    <span class="keyword">let</span> jsonData = JSON.stringify(curData);</span><br><span class="line">    html += `&lt;div <span class="keyword">class</span>=<span class="string">"item-box block4in1 $&#123;setClass(i)&#125;"</span> data-json=<span class="string">"$&#123;eH(jsonData)&#125;"</span> fe-role=<span class="string">"Widget"</span>&gt;</span><br><span class="line">               &lt;div <span class="keyword">class</span>=<span class="string">"item-content"</span>&gt;</span><br><span class="line">                 &lt;img <span class="keyword">class</span>=<span class="string">"poster"</span> src=<span class="string">"$&#123;eH(baseUrl + curData.recommendImage)&#125;"</span>&gt;</span><br><span class="line">                &lt;div <span class="keyword">class</span>=<span class="string">"item-mask"</span>&gt;&lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">             &lt;/div&gt;`;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> html;</span><br><span class="line">&#125;)()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到，我们利用一个立即执行函数，在函数内写一个for循环来实现。</p>
<ul>
<li>对以上的方法稍加优化，我们可以得到如下的代码：</li>
</ul>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$&#123;</span><br><span class="line">  blocksData.reduce((prev, next, i, arr) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> jsonData = JSON.stringify(next);</span><br><span class="line">    <span class="keyword">return</span> prev += </span><br><span class="line">    `&lt;div <span class="keyword">class</span>=<span class="string">"item-box block4in1 $&#123;setClass(i)&#125;"</span> data-json=<span class="string">"$&#123;eH(jsonData)&#125;"</span> fe-role=<span class="string">"Widget"</span>&gt;</span><br><span class="line">      &lt;div <span class="keyword">class</span>=<span class="string">"item-content"</span>&gt;</span><br><span class="line">        &lt;img <span class="keyword">class</span>=<span class="string">"poster"</span> src=<span class="string">"$&#123;eH(baseUrl + next.recommendImage)&#125;"</span>&gt;</span><br><span class="line">        &lt;div <span class="keyword">class</span>=<span class="string">"item-mask"</span>&gt;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;`;</span><br><span class="line">  &#125;, <span class="string">''</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们利用了Array的reduce方法，从而不需要将代码封装在一个立即执行函数之中。</p>
<h3 id="if_else_条件判断">if else 条件判断</h3><p>很容易想到用三目运算符：</p>
<pre><code>${(data &amp;&amp; data != <span class="string">''</span>) ? `&lt;<span class="keyword">div</span>&gt;${data}&lt;/<span class="keyword">div</span>&gt;` : `&lt;<span class="keyword">div</span>&gt;no contnet&lt;/<span class="keyword">div</span>&gt;`}
</code></pre><p>如果只在存在数据时有相应的html，不存在数据时没有html，则可以这么写：</p>
<pre><code>${(<span class="typedef"><span class="keyword">data</span> &amp;&amp; <span class="keyword">data</span> != '') &amp;&amp; `&lt;div&gt;$<span class="container">{<span class="title">data</span>}</span>&lt;/div&gt;`}</span>
</code></pre><h3 id="特殊字符转义">特殊字符转义</h3><p>在模板中非常重要的一点是字符串的转义，因为涉及到安全的问题，一个简单的方式是利用标签模板：</p>
<pre><code>var message = SaferHTML<span class="escape">`&lt;</span>p&gt;${bonk.sender} has sent you <span class="literal">a</span> bonk.&lt;/p&gt;<span class="escape">`;</span>
</code></pre><p>上面的代码等价于：</p>
<pre><code><span class="keyword">var</span> <span class="keyword">message</span> = SaferHTML(templateData, bonk.sender);
</code></pre><p>其中，    templateData 是一个不可变的字符串数组，在上例中为：</p>
<pre><code><span class="built_in">Object</span>.freeze([<span class="string">"&lt;p&gt;"</span>, <span class="string">" has sent you a bonk.&lt;/p&gt;"</span>]
</code></pre><p>SaferHTML需要我们自己去实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SaferHTML</span>(<span class="params">templateData</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> s = templateData[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> arg = <span class="built_in">String</span>(<span class="built_in">arguments</span>[i]);</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// Escape special characters in the substitution.</span></span><br><span class="line">    s += arg.replace(<span class="regexp">/&amp;/g</span>, <span class="string">"&amp;amp;"</span>)</span><br><span class="line">            .replace(<span class="regexp">/&lt;/g</span>, <span class="string">"&amp;lt;"</span>)</span><br><span class="line">            .replace(<span class="regexp">/&gt;/g</span>, <span class="string">"&amp;gt;"</span>);</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// Don't escape special characters in the template.</span></span><br><span class="line">    s += templateData[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从安全角度来看，这个 SaferHTML 非常脆弱。在 HTML 中，不同的地方需要用不同的方式去转义，SaferHTML 并没有做到。<br>另外一点是，这个方法只适用于没有嵌套使用模板字符串的情况，如果嵌套使用，那么一些不该被转义的字符串页会被转义。在这种情况下，我们还是老老实实地对每一处改转义的地方进行转义.</p>
<p>首先，需要编写一个转义函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reUnescapedHtml = <span class="regexp">/[&amp;&lt;&gt;"'`]/g</span>; <span class="comment">// 需要被转码的字符</span></span><br><span class="line"><span class="keyword">const</span> reHasUnescapedHtml = <span class="built_in">RegExp</span>(reUnescapedHtml.source); <span class="comment">// 测试是否有unescaped字符时不需要 'g'</span></span><br><span class="line"><span class="keyword">const</span> htmlEscapes = &#123;</span><br><span class="line">        <span class="string">'&amp;'</span>: <span class="string">'&amp;amp;'</span>,</span><br><span class="line">        <span class="string">'&lt;'</span>: <span class="string">'&amp;lt;'</span>,</span><br><span class="line">        <span class="string">'&gt;'</span>: <span class="string">'&amp;gt;'</span>,</span><br><span class="line">        <span class="string">'"'</span>: <span class="string">'&amp;quot;'</span>,</span><br><span class="line">        <span class="string">"'"</span>: <span class="string">'&amp;#39;'</span>,</span><br><span class="line">        <span class="string">'`'</span>: <span class="string">'&amp;#96;'</span></span><br><span class="line">      &#125;;</span><br><span class="line"><span class="keyword">const</span> escapeHtmlChar = basePropertyOf(htmlEscapes);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">basePropertyOf</span>(<span class="params">object</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> object == <span class="literal">null</span> ? <span class="literal">undefined</span> : object[key];</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 转义html字符串</span><br><span class="line">* @param string &#123;String&#125; 输入的字符串</span><br><span class="line">* @return &#123;String&#125; 转义后的字符串</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">escapeHTML</span>(<span class="params">string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (string &amp;&amp; reHasUnescapedHtml.test(string))</span><br><span class="line">    ? string.replace(reUnescapedHtml, escapeHtmlChar)</span><br><span class="line">    : string;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = escapeHTML;</span><br></pre></td></tr></table></figure>
<p>然后我们在每一个需要转义字符串的地方调用 escapeHTML 方法进行转义。</p>
<h3 id="参考文献：">参考文献：</h3><p><a href="https://www.owasp.org/index.php/DOM_based_XSS_Prevention_Cheat_Sheet" target="_blank" rel="external">DOM based XSS Prevention Cheat Sheet</a><br><a href="https://segmentfault.com/a/1190000003874852" target="_blank" rel="external">[Web 安全] 了解XSS与防范</a><br><a href="http://wiki.jikexueyuan.com/project/es-six-deeply/template-strings.html" target="_blank" rel="external">模版字符串</a><br><a href="http://jaysoo.ca/2014/03/20/i18n-with-es6-template-strings/" target="_blank" rel="external">i18n with tagged template strings in ECMAScript 6</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/23/webpack学习/" itemprop="url">
                  webpack学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-23T10:51:53+08:00" content="2016-03-23">
              2016-03-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/23/webpack学习/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/23/webpack学习/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="功能需求">功能需求</h4><ul>
<li>编译</li>
<li>压缩</li>
<li>web服务器</li>
</ul>
<h4 id="webpack学习">webpack学习</h4><pre><code>$ webpack --config XXX<span class="class">.js</span>   <span class="comment">//使用另一份配置文件（比如webpack.config2.js）来打包</span>

$ webpack --watch   <span class="comment">//监听变动并自动打包</span>

$ webpack -<span class="tag">p</span>    <span class="comment">//压缩混淆脚本，这个非常非常重要！</span>

$ webpack -d    <span class="comment">//生成map映射文件，告知哪些模块被最终打包到哪里了</span>
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/18/优化显示效率/" itemprop="url">
                  谷歌前端开发指南之优化内容显示效率
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-18T17:17:45+08:00" content="2016-03-18">
              2016-03-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/18/优化显示效率/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/18/优化显示效率/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>转载自@笑博，翻译自google大牛</p>
<pre><code><span class="number">1.</span> 删除不必要的下载（即减少http访问请求）
<span class="number">2.</span> 优化基于文本的资产的编码和传输大小
<span class="number">3.</span> 图片优化
<span class="number">4.</span> 网页字体优化
<span class="number">5.</span> HTTP 缓存
</code></pre><h3 id="1-_删除不必要的下载（即减少http访问请求）（最快和最好的优化资源是不需要下载的资源。）">1. 删除不必要的下载（即减少http访问请求）（最快和最好的优化资源是不需要下载的资源。）</h3><ul>
<li>网页往往会包含一些不必要的资源；或者更糟的是，包含的某些资源会影响网页性能，同时还无法给访问者或所处的网站带来太大价值。</li>
<li>要实现最佳效果，应针对网页上的每个资源，定期清点和重新评估。</li>
</ul>
<h3 id="2-_优化基于文本的资产的编码和传输大小">2. 优化基于文本的资产的编码和传输大小</h3><ul>
<li>数据压缩<ul>
<li>将浏览器必须下载的剩余资源的总大小减至最小</li>
</ul>
</li>
<li>源码压缩：预处理和特定于内容的优化</li>
<li>使用 GZIP 进行文本压缩</li>
</ul>
<h3 id="3-_图片优化">3. 图片优化</h3><ul>
<li>删除和替换图片：<code>要实现所需的效果，是否确实需要图片</code> —— 能否利用CSS效果等更高效的方式替代</li>
<li>矢量图与光栅图：<ul>
<li>矢量图（使用线、点和多边形来展示图片）：最适用于由简单的几何形状（例如徽标、文字、图标等）组成的图片，任何分辨率和缩放设置都可以提供清晰的效果，该格式最适用于需要以不同尺寸显示的高分辨率场景和资源。</li>
<li>光栅图（通过对矩形栅格内每个像素的值进行编码来展示图片）：场景复杂（例如照片等），就应使用光栅图格式 。</li>
</ul>
</li>
<li>高分辨率屏幕的含义（高分辨率屏幕需要高分辨率图片）：尽可能选择矢量图，因为矢量图与分辨率无关，始终可以实现清晰的效果，如果需要光栅图，应提供并优化每个图片的多个版本。</li>
<li>优化矢量图（SVG文件）<ul>
<li>通过运行 svgo 之类的工具缩减 SVG 文件 </li>
<li>因为 SVG 是基于 XML 的格式，所以，还可以采用 GZIP 压缩来减小传输大小 - 确保将服务器配置为压缩 SVG 资源</li>
</ul>
</li>
<li>优化光栅图<ul>
<li>光栅图是一个 2 维’像素’栅格（如：100 x 100 像素的图片是 10000 个像素的序列），每个像素存储’RGBA‘值：(R) 红色通道、(G) 绿色通道、(B) 蓝色通道和 (A) alpha（透明度）通道</li>
<li>无论将数据从服务器传输到客户端时使用哪种图片格式，在浏览器对图片进行解码时，每个像素始终占用 4 个字节的内存。对于较大的图片以及可用内存不足的设备（例如低端移动设备）来说，这可能是一个重要的约束条件。</li>
<li>压缩图片，考虑使用webp</li>
</ul>
</li>
<li>无损图片压缩与有损图片压缩：<ul>
<li>使用’有损‘过滤器处理图片，删除一些像素数据</li>
<li>使用’无损‘过滤器处理图片，压缩像素数据</li>
<li>因为对图片进行编码所使用的算法不同，所以，不同图片格式的质量级别无法直接进行比较：质量为 90 的 JPEG 与质量为 90 的 WebP 效果截然不同。实际上，即使相同图片格式的质量级别，根据压缩程序的使用方式不同，视觉效果可能也会不同！</li>
</ul>
</li>
<li>选择正确的图片格式：<ul>
<li>普遍支持的三种格式为：GIF、PNG 和 JPEG。除了这些格式之外，某些浏览器还支持 WebP 和 JPEG XR 等较新的格式，可以提供更好的整体压缩以及更多的功能。</li>
<li>平均来说，与可比的 JPEG 图片相比，WebP 可以使文件大小减少 30%。</li>
<li>优化工具：<ul>
<li>gifsicle    创建和优化 GIF 图片</li>
<li>jpegtran    优化 JPEG 图片</li>
<li>optipng    无损 PNG 优化</li>
<li>pngquant    有损 PNG 优化</li>
</ul>
</li>
</ul>
</li>
<li>提供缩放的图片资源：尽量提供尺寸合适的图片，减少因图片缩放耗费性能<ul>
<li>尽管您也许无法保证每个资源都以精确的显示尺寸提供，但是，应确保不必要的像素数最少，并确保特别是较大资产以尽可能接近显示尺寸的尺寸提供。</li>
</ul>
</li>
</ul>
<blockquote>
<p>在优化图片时，要记住下列技巧和方法：</p>
<ul>
<li>首选矢量格式：矢量图与分辨率和缩放无关，最适用于多设备或高分辨率的情况。</li>
<li>缩减和压缩 SVG 资源：大多数绘图应用程序生成的 XML 标记通常包含不必要的元数据，可以删除；确保服务器配置为对 SVG 资源采用 GZIP 压缩。</li>
<li>选择最佳光栅图格式：确定功能要求，然后选择适合每个特定资源的格式。</li>
<li>体验光栅格式的最优质量设置：随意降低’质量’设置，效果通常非常好，而字节可能会节省很多。</li>
<li>删除不必要的图片元数据：许多光栅图包含不必要的资源元数据：地理信息、相机信息等。使用适合的工具删除这些数据。</li>
<li>提供缩放的图片：调整服务器上的图片尺寸，确保’显示’尺寸尽可能接近图片的’自然’尺寸。尤其要密切关注较大的图片，因为这些图片在调整尺寸时，占用了最大的额外开销！</li>
<li>自动：投资自动化的工具和基础设施，这样，可以确保所有图片资源始终会进行优化。</li>
</ul>
</blockquote>
<h3 id="4-_网页字体优化">4. 网页字体优化</h3><ul>
<li>网页字体解析<ul>
<li>网页字体格式</li>
<li>通过压缩减小字体大小</li>
</ul>
</li>
<li>使用 @font-face 定义字体系列<ul>
<li>格式选择</li>
<li>Unicode-range 子集内嵌</li>
</ul>
</li>
<li>优化加载和呈现</li>
</ul>
<h3 id="5-_HTTP_缓存">5. HTTP 缓存</h3><ul>
<li>使用 ETag 验证缓存的响应<ul>
<li>服务器会生成并返回一个随机令牌，通常是文件内容的哈希值或者某个其他指纹码。客户端不必了解指纹码是如何生成的，只需要在下一个请求中将其发送给服务器：如果指纹码仍然一致，说明资源未被修改，我们就可以跳过下载。</li>
<li>实际上，我们唯一要做的就是确保服务器提供必要的 ETag 令牌：查看服务器文档中是否有必要的配置标志。 </li>
</ul>
</li>
<li>Cache-Control</li>
<li>废弃和更新已缓存的响应</li>
</ul>
<blockquote>
<p>在定义缓存策略时，要记住下列技巧和方法：</p>
<ul>
<li>使用一致的网址：如果您在不同的网址上提供相同的内容，将会多次获取和存储该内容。提示：注意，网址区分大小写！</li>
<li>确保服务器提供验证令牌 (ETag)：通过验证令牌，如果服务器上的资源未被更改，就不必传输相同的字节。</li>
<li>确定中继缓存可以缓存哪些资源：对所有用户的响应完全相同的资源很适合由 CDN 或其他中继缓存进行缓存。</li>
<li>确定每个资源的最优缓存周期：不同的资源可能有不同的更新要求。审查并确定每个资源适合的 max-age。</li>
<li>确定网站的最佳缓存层级：对 HTML 文档组合使用包含内容指纹码的资源网址以及短时间或 no-cache 的生命周期，可以控制客户端获取更新的速度。</li>
<li>搅动最小化：有些资源的更新比其他资源频繁。如果资源的特定部分（例如 JavaScript 函数或一组 CSS 样式）会经常更新，应考虑将其代码作为单独的文件提供。这样，每次获取更新时，剩余内容（例如不会频繁更新的库代码）可以从缓存中获取，确保下载的内容量最少。</li>
</ul>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/17/Charles抓包实战/" itemprop="url">
                  Charles抓包实战
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-17T14:01:06+08:00" content="2016-03-17">
              2016-03-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/调试/" itemprop="url" rel="index">
                    <span itemprop="name">调试</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/17/Charles抓包实战/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/17/Charles抓包实战/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="下载">下载</h3><p>官网下载地址：<a href="http://www.charlesproxy.com/latest-release/download.do" target="_blank" rel="external">http://www.charlesproxy.com/latest-release/download.do</a></p>
<p>下载后直接安装即可</p>
<h3 id="抓包">抓包</h3><h4 id="一、http抓包">一、http抓包</h4><ul>
<li>1、打开Charles程序</li>
<li>2、查看Mac电脑的IP地址，系统偏好设置-&gt;网络就可以查看到了，比如我的ip地址是：30.11.160.175</li>
<li>3、打开iOS设置，进入当前wifi连接(Mac在一个局域网内)，设置HTTP代理Group，将服务器填为上一步中获得的IP，即30.11.160.175，端口填8888：</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/15/30pluscss/" itemprop="url">
                  30+有用css代码片段
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-15T23:37:29+08:00" content="2016-03-15">
              2016-03-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/css/" itemprop="url" rel="index">
                    <span itemprop="name">css</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/15/30pluscss/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/15/30pluscss/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>原文：<a href="http://webres.wang/31-css-code-snippets-to-make-you-a-better-coder/?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">http://webres.wang/31-css-code-snippets-to-make-you-a-better-coder/?utm_source=tuicool&amp;utm_medium=referral</a></p>
<h4 id="1、垂直对齐">1、垂直对齐</h4><pre><code><span class="class">.vc</span> <span class="rules">{
    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;
    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">50%</span></span></span>;
    <span class="rule"><span class="attribute">-webkit-transform</span>:<span class="value"> <span class="function">translateY</span>(-<span class="number">50%</span>)</span></span>;
    <span class="rule"><span class="attribute">-o-transform</span>:<span class="value"> <span class="function">translateY</span>(-<span class="number">50%</span>)</span></span>;
    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateY</span>(-<span class="number">50%</span>)</span></span>;
}</span>
</code></pre><h4 id="2、只在一侧或两侧具有投影">2、只在一侧或两侧具有投影</h4><pre><code><span class="class">.box-shadow</span> <span class="rules">{
    <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#AC92EC</span></span></span>;
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">160px</span></span></span>;
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">90px</span></span></span>;
    <span class="rule"><span class="attribute">margin-top</span>:<span class="value"> -<span class="number">45px</span></span></span>;
    <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">80px</span></span></span>;
    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;
    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">50%</span></span></span>;
    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;
}</span>

<span class="rule"><span class="attribute">.box-shadow</span>:<span class="value">after {
    content: <span class="string">""</span></span></span>;
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">150px</span></span></span>;
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">1px</span></span></span>;
    <span class="rule"><span class="attribute">margin-top</span>:<span class="value"> <span class="number">88px</span></span></span>;
    <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">75px</span></span></span>;
    <span class="rule"><span class="attribute">display</span>:<span class="value"> block</span></span>;
    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;
    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;
    <span class="rule"><span class="attribute">z-index</span>:<span class="value"> -<span class="number">1</span></span></span>;
    <span class="rule"><span class="attribute">-webkit-box-shadow</span>:<span class="value"> <span class="number">0px</span> <span class="number">0px</span> <span class="number">8px</span> <span class="number">2px</span> <span class="hexcolor">#000000</span></span></span>;
       <span class="rule"><span class="attribute">-moz-box-shadow</span>:<span class="value"> <span class="number">0px</span> <span class="number">0px</span> <span class="number">8px</span> <span class="number">2px</span> <span class="hexcolor">#000000</span></span></span>;
            <span class="rule"><span class="attribute">box-shadow</span>:<span class="value"> <span class="number">0px</span> <span class="number">0px</span> <span class="number">8px</span> <span class="number">2px</span> <span class="hexcolor">#000000</span></span></span>;
}
</code></pre><h4 id="3、渐变背景动画效果">3、渐变背景动画效果</h4><p>。。。未完待续</p>
<p>。。。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/14/absolute-margin/" itemprop="url">
                  absolute定位下的margin居中失效
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-14T23:25:34+08:00" content="2016-03-14">
              2016-03-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/css/" itemprop="url" rel="index">
                    <span itemprop="name">css</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/14/absolute-margin/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/14/absolute-margin/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在绝对定位时，css样式中设置margin：0 auto；失效问题，例子如下：</p>
<pre><code><span class="class">.middle-div</span> <span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100px</span></span></span>;
    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;
    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;
}</span>
</code></pre><p>如上的方式并不能实现元素的水平居中。而采用相对定位则可以：</p>
<pre><code><span class="class">.middle-div</span> <span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100px</span></span></span>;
    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;
    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;
}</span>
</code></pre><p>然而，absolute定位下，margin是可以工作的，例如</p>
<pre><code><span class="class">.middle-div</span> <span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100px</span></span></span>;
    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;
    <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> <span class="number">50%</span></span></span>;
}</span>
</code></pre><p>这样元素的确能相对父元素向右移动父元素宽度的50％。</p>
<p>一般对于absolute定位的元素，我们居中的方式为：</p>
<pre><code><span class="class">.middle-div</span> <span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100px</span></span></span>;
    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;
    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;
    <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">50px</span></span></span>;
}</span>
</code></pre><p>还有有趣的一点是，如下代码，也能实现absolute定位元素的水平居中：</p>
<pre><code><span class="class">.middle-div</span> <span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100px</span></span></span>;
    <span class="rule"><span class="attribute">positon</span>:<span class="value"> absolute</span></span>;
    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">0</span></span></span>;
    <span class="rule"><span class="attribute">right</span>:<span class="value"> <span class="number">0</span></span></span>;
    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;
}</span>
</code></pre><p>这其中的原理，上网搜索了很多内容，但都没有讲清楚，后续将继续研究，今天暂且做个记录。</p>
<p><a href="https://github.com/petehunt/react-howto/blob/master/README-zh.md" target="_blank" rel="external">如何学习react</a></p>
<p><a href="https://www.zhihu.com/question/36516604" target="_blank" rel="external">react 有哪些最佳实践?</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/04/form/" itemprop="url">
                  表单（Form）小结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-01-04T10:42:44+08:00" content="2016-01-04">
              2016-01-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/01/04/form/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/04/form/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="介绍">介绍</h2><p>这段时间做了个后台的前端项目。说实话，之前并没有做过后台的项目。在做了后台项目后，发现最重要的是要熟练掌握表单相关的技术。这篇文章将我所做的后台项目中用到的表单相关的知识做一个总结，也算是一种积累吧。:)</p>
<h3>一个简单的表单示例</h3>

<p>下面是一个简单的表单示例：</p>
<pre><code>&lt;<span class="keyword">form</span> id=<span class="string">"main-form"</span> action=<span class="string">"http://somesite.com/prog/adduser"</span> method=<span class="string">"post"</span>&gt;
    &lt;<span class="keyword">label</span> <span class="keyword">for</span>=<span class="string">"name"</span>&gt;姓名: &lt;/<span class="keyword">label</span>&gt;
    &lt;<span class="keyword">input</span> <span class="keyword">type</span>=<span class="string">"text"</span> name=<span class="string">"name"</span> id=<span class="string">"name"</span>&gt;&lt;<span class="keyword">br</span>&gt;
    &lt;<span class="keyword">label</span>&gt;
        性别：
        &lt;<span class="keyword">input</span> <span class="keyword">type</span>=<span class="string">"radio"</span> name=<span class="string">"sex"</span> value=<span class="string">"Male"</span>&gt;男
        &lt;<span class="keyword">input</span> <span class="keyword">type</span>=<span class="string">"radio"</span> name=<span class="string">"sex"</span> value=<span class="string">"Female"</span>&gt;女&lt;<span class="keyword">br</span>&gt;
    &lt;<span class="keyword">label</span>&gt;
    &lt;<span class="keyword">input</span> <span class="keyword">type</span>=<span class="string">"submit"</span> value=<span class="string">"Send"</span>&gt; &lt;<span class="keyword">input</span> <span class="keyword">type</span>=<span class="string">"reset"</span>&gt;
 &lt;/<span class="keyword">form</span>&gt;
</code></pre><p>页面如图所示：</p>
<p><img src="http://img.alicdn.com/tps/TB1h_YhLXXXXXb3aXXXXXXXXXXX-239-81.jpg" alt=""></p>
<p>当我们点击send按钮时，就能向服务器端发送表单。点击重置按钮时，input中的value值将会是我们设置的默认值。<br>form的action属性值为服务端处理我们提交的表单的URI。<br>method是表单提交的方式。</p>
<p>input标签是表单中的控件，用户在input中输入的值，或者用户选择了某个radio选项的值就是这个控件的value值。当提交表单时，input中的name和value值编码后传给服务器端，服务器端解码后根据name和value键值对获取用户提交的信息。</p>
<h2 id="表单提交的过程">表单提交的过程</h2><h3>成功控件</h3>

<p>成功控件是能被提交给服务端的控件，每个成功控件都有其name已经value值，以被作为form数据的一部分传给服务器端。一个成功控件必须在form标签之中，并且有name值。</p>
<p>此外，成功控件还需满足以下条件：</p>
<ul>
<li>控件不能设置为disabled。</li>
<li>如果form包含多个提交按钮，只有被点击的提交按钮才是成功控件。</li>
<li>被选中的checkbox才算成功控件。</li>
<li>被选中的radio才算成功控件。</li>
<li>select选项，被选中的option才是成功控件，如果没有option被选中，那么这个select不是成功控件，将不被提交。</li>
<li>包含了文件的file控件才是成功控件。</li>
</ul>
<p>注意：如果控件的display属性被设置为none，控件仍然可以是成功的。</p>
<h3>提交表单</h3>

<p>表单提交可以分为以下几步：</p>
<ul>
<li>1、验证成功的控件，如上文所诉。</li>
<li>2、创建表单数据集，由成功控件的name和value组成的键值对序列。</li>
<li>3、编码表单数据集，编码方式由form元素的enctype属性来指定。</li>
<li>4、提交编码后的表单数据集。  </li>
</ul>
<h2 id="对多个提交按钮，做不同提交任务的处理">对多个提交按钮，做不同提交任务的处理</h2><p>我们经常会碰到这样的需求，一个页面中有多个不同的按钮，点击按钮时服务端做不同的处理。此时我们改如何处理呢？<br>一种方式是可以给提交按钮设置不同的name，服务端通过判断name来判断用户点击了哪个按钮，然后做相应的处理。另一种方式是给提交按钮设置相同的name，不同的value，服务端通过判断value值来判断用户点击了哪个按钮。</p>
<p>以上两种方式将判断的工作交给了服务端。对于前端，我们可以用ajax的方式提交表单来实现多个提交按钮的处理。用ajax提交的另一个好处是可以防止页面刷新或者跳转到action指定的页面。</p>
<p>如果用jQuery，我们可以这么提交：</p>
<pre><code>$(<span class="string">"#main-form"</span>).on(<span class="string">"submit"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>{
    e.preventDefault();
    $.post(<span class="keyword">this</span>.action, $(<span class="keyword">this</span>).serialize());
}); 
</code></pre><p>用jQuery，如果想上传部分表单，我们可以这么提交</p>
<pre><code>&lt;div id=<span class="string">"divCustomerInfo"</span>&gt;
    &lt;p&gt;名称: &lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"CustomerName"</span> /&gt;&lt;/p&gt;
    &lt;p&gt;电话: &lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"CustomerTel"</span> /&gt;&lt;/p&gt;
&lt;/div&gt;

$(<span class="string">"#btnId"</span>).click(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{
    $.ajax({
        url: <span class="string">"test.htm"</span>, 
        <span class="built_in">type</span>: <span class="string">"POST"</span>,
        data: $(<span class="string">'#divCustomerInfo :text'</span>).fieldSerialize(),
        success: <span class="function"><span class="keyword">function</span><span class="params">(responseText)</span></span>{
            alert(responseText);
        }
    });
    <span class="keyword">return</span> <span class="keyword">false</span>;
});
</code></pre><p>利用H5的FormData对象，我们可以这么提交：</p>
<pre><code>document.getElementById(<span class="string">"main-form"</span>).onsubmit = function(e) {

    e.preventDefault();

    var f = e.target,
        formData = new FormData(f),
        xhr = new XMLHttpRequest();

    xhr.open(<span class="string">"<span class="keyword">POST</span>"</span>, f.action);
    xhr.send(formData);
}
</code></pre><p>对于jQuery，还有一个强大的插件jquery.form.js，利用这个插件，我们可以这么提交：</p>
<pre><code> $(<span class="string">'.send-message'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>{
    e.preventDefault();
    <span class="keyword">if</span>(self.validateForm(VALIDATE_TYPE.TEST_MESSAGE)){
        $(<span class="string">'#main-form'</span>).ajaxSubmit({
            url: <span class="string">'/message/send_test_message.htm'</span>,
            success: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>{
                <span class="keyword">if</span>(<span class="keyword">typeof</span> res === <span class="string">'string'</span>)
                    res = <span class="built_in">JSON</span>.parse(res);
                <span class="built_in">console</span>.log(res);
                <span class="keyword">if</span>(res.result === <span class="string">'success'</span>){
                    $(<span class="string">'.test-success'</span>).removeClass(<span class="string">'hide'</span>);
                }
                <span class="keyword">else</span>{
                    alert(res.errorMsg);
                    $(<span class="string">'.test-success'</span>).addClass(<span class="string">'hide'</span>);
                }
            },
            error: <span class="function"><span class="keyword">function</span>(<span class="params">xhr, type</span>)</span>{
                $(<span class="string">'.test-success'</span>).addClass(<span class="string">'hide'</span>);
                alert(<span class="string">'提交测试失败，请重试！'</span>);
                <span class="built_in">console</span>.log(<span class="string">'Ajax error! '</span> + type);
            }
        });
    }<span class="keyword">else</span>{
        $(<span class="string">'.test-success'</span>).addClass(<span class="string">'hide'</span>);
    }
});
</code></pre><p>利用ajaxSubmit，我们可以设置提交的url，以及成功和失败的回调函数，在处理业务时的确方便很多。而且不用手动序列化提交的表单数据。<br>ajaxSubmit还有一个强大的地方是能够处理文件的提交。</p>
<h2 id="表单文件上传">表单文件上传</h2><p>下面是一个表单文件上传的例子：</p>
<pre><code>&lt;form action=<span class="string">"/message/upload_image.htm"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span> <span class="class"><span class="keyword">class</span>=</span><span class="string">"postimg-form"</span>&gt;
    &lt;div <span class="class"><span class="keyword">class</span>=</span><span class="string">"form-group"</span>&gt;
        &lt;input name=<span class="string">"file"</span> id=<span class="string">"file"</span> <span class="class"><span class="keyword">type</span>=</span><span class="string">"file"</span> <span class="class"><span class="keyword">class</span>=</span><span class="string">"send-file"</span>  style=<span class="string">"display: inline-block;"</span>/&gt;
    &lt;/div&gt;
    &lt;div <span class="class"><span class="keyword">class</span>=</span><span class="string">"urlinput-wrap"</span>&gt;
        &lt;span&gt;图片<span class="type">URL</span>：&lt;/span&gt;
        &lt;input name=<span class="string">"picurlList"</span> <span class="class"><span class="keyword">type</span>=</span><span class="string">"text"</span> value=<span class="string">"$!{picurlList}"</span>  <span class="class"><span class="keyword">class</span>=</span><span class="string">"img-url not-hidden"</span>&gt;&lt;/input&gt;
    &lt;/div&gt;

    &lt;button <span class="class"><span class="keyword">type</span>=</span><span class="string">"button"</span>&gt;取消&lt;/button&gt;
    &lt;input <span class="class"><span class="keyword">type</span>=</span><span class="string">"submit"</span> <span class="class"><span class="keyword">class</span>=</span><span class="string">"commit-changepic"</span>&gt;确定&lt;/button&gt;
&lt;/form&gt;
</code></pre><p>对于文件上传，必须采用post方式，并且form元素的enctype需要设置为multipart/form-data。</p>
<p>表单的enctype一般常用的有两种：</p>
<ul>
<li><p>application/x-www-form-urlencoded:</p>
<p>  这是默认的编码方式。它只处理表单域里的value属性值，采用这种变法方式的表单会将表单域的值处理成URL方式。</p>
</li>
<li><p>multipart/form-data: </p>
<p> 这种编码方式会以二进制流的方式来处理表单数据，这中编码方式会把文件域指定的文件内容也封装到请求参数里。</p>
</li>
</ul>
<p>用form的submit提交文件，会导致刷新页面，或者无法在提交成功后在回调函数中处理相应的业务。</p>
<p>而一般的ajax无法满足文件的上传(HTML5提出了XMLHttpRequest对象的第二版，从此ajax能够上传文件了。)。所幸的是，ajaxSubmit可以支持文件的提交。</p>
<p>示例代码如下：</p>
<pre><code>$(<span class="string">'.commit-changepic'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>{
    e.preventDefault();
    $(<span class="string">'.postimg-form'</span>).ajaxSubmit({
        success: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>{
            <span class="built_in">console</span>.log(res);
            <span class="built_in">console</span>.log(res.fileUrl);
            <span class="keyword">if</span>(res.fileUrl){
                $(<span class="string">'.poster-img'</span>).attr(<span class="string">'src'</span>,res.fileUrl);
                $($(<span class="string">'.img-url'</span>)[<span class="number">0</span>]).val(res.fileUrl);
            }<span class="keyword">else</span>{
                alert(<span class="string">'图片上传失败！'</span>);
            }
        },
        error: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>{
            <span class="built_in">console</span>.log(res);
            alert(<span class="string">'图片上传失败！'</span>);
        }
    });
   });
</code></pre><p>用H5的FormData上传文件，示例如下：</p>
<pre><code><span class="keyword">if</span>(<span class="built_in">window</span>.FormData) {　
　　　　<span class="keyword">var</span> formData = <span class="keyword">new</span> FormData();
　　　　<span class="comment">// 建立一个upload表单项，值为上传的文件</span>
　　　　formData.append(<span class="string">'upload'</span>, <span class="built_in">document</span>.getElementById(<span class="string">'upload'</span>).files[<span class="number">0</span>]);
　　　　<span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();
　　　　xhr.open(<span class="string">'POST'</span>, $(<span class="keyword">this</span>).attr(<span class="string">'action'</span>));
　　　　xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{
　　　　　　<span class="keyword">if</span> (xhr.status === <span class="number">200</span>) {
　　　　　　　　<span class="built_in">console</span>.log(<span class="string">'上传成功'</span>);
　　　　　　} <span class="keyword">else</span> {
　　　　　　　　<span class="built_in">console</span>.log(<span class="string">'出错了'</span>);
　　　　　　}
　　　　};
　　　　xhr.send(formData);
　　}
</code></pre><p>ajaxSubmit上传文件的原理还不清楚（猜测可能使用iframe实现的），有空可以研究一下。。。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars2.githubusercontent.com/u/7326406?v=3&s=460"
               alt="Zhenjiang Shao" />
          <p class="site-author-name" itemprop="name">Zhenjiang Shao</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">11</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>
          
          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/shaozj" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name">Links</p>
            
              <span class="links-of-author-item">
                <a href="http://kid-wumeng.me/" target="_blank">剑空</a>
              </span>
            
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhenjiang Shao</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=0.5.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"shaozj"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script>
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script>
  


  


</body>
</html>
